#!/usr/bin/env php
<?php

// Enrico Simonetti
// enricosimonetti.com
//
// 2018-01-25 on Sugar 7.9.3.0
//
// Tool that helps package Sugar installable modules

if (is_file($autoload = getcwd() . '/vendor/autoload.php')) {
    require $autoload;
}

use SugarModulePackager\PackageOutput;
use SugarModulePackager\PackageUtils;
use SugarModulePackager\FileReaderWriter;
use SugarModulePackager\EchoMessageOutputter;

$messageOutputter = new EchoMessageOutputter();

if (empty($argv[1])) {
    //PackageOutput::message('Use '.$argv[0].' [version]');
    $messageOutputter->message('Use '.$argv[0].' [version]');
    return;
}

//PackageUtils::build($argv[1]);
$packager = new \SugarModulePackager\Packager(new FileReaderWriter(), $messageOutputter);
$packager->build($argv[1]);

exit(0);
